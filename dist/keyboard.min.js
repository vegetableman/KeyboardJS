!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.keyboardJS=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var KeyboardJS=require("./lib/keyboard"),Locale=require("./lib/locale"),KeyCombo=require("./lib/key-combo"),usLocale=require("./locales/us"),keyboardJS=new KeyboardJS;keyboardJS.setLocale(usLocale),exports=module.exports=keyboardJS,exports.KeyboardJS=KeyboardJS,exports.Locale=Locale,exports.KeyCombo=KeyCombo;
},{"./lib/key-combo":2,"./lib/keyboard":3,"./lib/locale":4,"./locales/us":5}],2:[function(require,module,exports){
function KeyCombo(o){var r=this;guard("keyComboStr",o,"string"),r.sourceStr=o,r.subCombos=KeyCombo.parseComboStr(o),r.keyNames=r.subCombos.reduce(function(o,r){return o.concat(r)})}var guard=require("type-guard");KeyCombo.comboDeliminator=">",KeyCombo.keyDeliminator="+",KeyCombo.parseComboStr=function(o){guard("keyComboStr",o,"string");for(var r=KeyCombo._splitStr(o,KeyCombo.comboDeliminator),e=[],t=0;t<r.length;t+=1)e.push(KeyCombo._splitStr(r[t],KeyCombo.keyDeliminator));return e},KeyCombo._splitStr=function(o,r){for(var e=o,t=r,b="",s=[],m=0;m<e.length;m+=1)m>0&&e[m]===t&&"\\"!==e[m-1]&&(s.push(b.trim()),b="",m+=1),b+=e[m];return b&&s.push(b.trim()),s},KeyCombo.prototype.check=function(o){var r=this;guard("pressedKeyNames",o,"array");for(var e=0,t=0;t<r.subCombos.length;t+=1)if(e=r._checkSubCombo(r.subCombos[t],e,o),-1===e)return!1;return!0},KeyCombo.prototype.isEqual=function(o){var r=this;if(guard("otherKeyCombo",o,["object","string"]),"string"==typeof o?o=new KeyCombo(o):guard("otherKeyCombo.subCombos",o.subCombos,"array"),r.subCombos.length!==o.subCombos.length)return!1;for(var e=0;e<r.subCombos.length;e+=1)if(r.subCombos[e].length!==o.subCombos[e].length)return!1;for(var e=0;e<r.subCombos.length;e+=1){for(var t=r.subCombos[e],b=o.subCombos[e].slice(0),s=0;s<t.length;s+=1){var m=t[s],n=b.indexOf(m);n>-1&&b.splice(n,1)}if(0!==b.length)return!1}return!0},KeyCombo.prototype._checkSubCombo=function(o,r,e){guard("subCombo",o,"array"),guard("startingKeyNameIndex",r,"number"),guard("pressedKeyNames",e,"array"),o=o.slice(0),e=e.slice(r);for(var t=r,b=0;b<o.length;b+=1){var s=o[b];if("\\"===s[0]){var m=s.slice(1);(m===KeyCombo.comboDeliminator||m===KeyCombo.keyDeliminator)&&(s=m)}var n=e.indexOf(s);if(n>-1&&(o.splice(b,1),b-=1,n>t&&(t=n),0===o.length))return t}return-1},module.exports=KeyCombo;
},{"type-guard":6}],3:[function(require,module,exports){
(function(e){function n(e){var n=this;t("targetWindow",e,["object","undefined"]),n.locale=null,n._listeners=[],n._appliedListeners=[],n._locales={},n._targetDocument=null,n._targetWindow=null,n.watch()}var t=require("type-guard"),r=require("./locale"),o=require("./key-combo");n.prototype.bind=function(e,n,r){var l=this;if(t("keyComboStr",e,["string","array"]),t("pressHandler",n,"function"),t("releaseHandler",r,["function","undefined"]),"string"==typeof e)l._listeners.push({keyCombo:new o(e),pressHandler:n,releaseHandler:r||null});else for(var s=0;s<e.length;s+=1)l.bind(e[s],n,r)},n.prototype.addListener=n.prototype.bind,n.prototype.on=n.prototype.bind,n.prototype.unbind=function(e,n,r){var o=this;if(t("keyComboStr",e,["string","array"]),t("pressHandler",n,["function","undefined"]),t("releaseHandler",r,["function","undefined"]),"string"==typeof e)for(var l=0;l<o._listeners.length;l+=1){var s=o._listeners[l],i=s.keyCombo.isEqual(e),a=!n||n===s.pressHandler,d=null===s.releaseHandler||r===s.releaseHandler;i&&a&&d&&(o._listeners.splice(l,1),l-=1)}else for(var l=0;l<e.length;l+=1)o.bind(e[l],n,r)},n.prototype.removeListener=n.prototype.unbind,n.prototype.off=n.prototype.unbind,n.prototype.setLocale=function(e,n){var o=this,l=null;"string"==typeof e?(t("localeName",e,["string","null"]),t("localeBuilder",n,["function","undefined"]),n?(l=new r(e),n(l)):l=o._locales[e]||null):(t("locale",e,"object"),t("locale.localeName",e.localeName,"string"),t("locale.pressKey",e.pressKey,"function"),t("locale.releaseKey",e.releaseKey,"function"),t("locale.pressedKeys",e.pressedKeys,"array"),l=e,e=l.localeName),o.locale=l,o._locales[e]=l},n.prototype._bindEvent=function(e,n,t){var r=this;return r._isModernBrowser?e.addEventListener(n,t,!1):e.attachEvent("on"+n,t)},n.prototype._unbindEvent=function(e,n,t){var r=this;return r._isModernBrowser?e.removeEventListener(n,t,!1):e.detachEvent("on"+n,t)},n.prototype.watch=function(n,r){var o=this;o.stop(),t("targetDocument",n,["object","undefined"]),t("targetWindow",r,["object","undefined"]),n&&n.document&&!r&&(r=n),r||(r=e.window),r&&!n&&(n=r.document),n&&r&&(o._isModernBrowser=!!r.addEventListener,o._bindEvent(n,"keydown",function(e){o.pressKey(e.keyCode,e)}),o._bindEvent(n,"keyup",function(e){o.releaseKey(e.keyCode,e)}),o._bindEvent(r,"focus",o.releaseAllKeys.bind(o)),o._bindEvent(r,"blur",o.releaseAllKeys.bind(o)),o._targetDocument=n,o._targetWindow=r)},n.prototype.stop=function(){var e=this;e._targetDocument&&(e._unbindEvent(e._targetDocument,"keydown",function(n){e.pressKey(n.keyCode,n)}),e._unbindEvent(e._targetDocument,"keyup",function(n){e.releaseKey(n.keyCode,n)}),e._targetDocument=null),e._targetWindow&&(e._unbindEvent(e._targetWindow,"focus",e.releaseAllKeys.bind(e)),e._unbindEvent(e._targetWindow,"blur",e.releaseAllKeys.bind(e)),e._targetWindow=null)},n.prototype.pressKey=function(e,n){var r=this;t("keyCode",e,["number","string"]),t("event",n,["object","undefined"]),r.locale.pressKey(e),r._applyBindings(n)},n.prototype.releaseKey=function(e,n){var r=this;t("keyCode",e,["number","string"]),t("event",n,["object","undefined"]),r.locale.releaseKey(e),r._clearBindings(n)},n.prototype.releaseAllKeys=function(){var e=this;e.locale.pressedKeys.length=0,e._clearBindings()},n.prototype.reset=function(){var e=this;e.releaseAllKeys(),e._listeners.length=0},n.prototype._applyBindings=function(e){for(var n=this,t=n.locale.pressedKeys.slice(0),r=n._listeners.slice(0).sort(function(e,n){return e.keyNames.length>n.keyNames.length}),o=0;o<r.length;o+=1){var l=r[o],s=l.keyCombo,i=l.pressHandler;if(s.check(t)){i.apply(n,e);for(var a=0;a<s.keyNames.length;a+=1){var d=t.indexOf(s.keyNames[a]);-1!==d&&(t.splice(d,1),a-=1)}l.releaseHandler&&-1===n._appliedListeners.indexOf(l)&&n._appliedListeners.push(l)}}},n.prototype._clearBindings=function(e){for(var n=this,t=0;t<n._appliedListeners.length;t+=1){var r=n._appliedListeners[t],o=r.keyCombo,l=r.releaseHandler;o.check(n.locale.pressedKeys)||(l.apply(n,e),n._appliedListeners.splice(t,1),t-=1)}},module.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./key-combo":2,"./locale":4,"type-guard":6}],4:[function(require,module,exports){
function Locale(e){var r=this;guard("name",e,"string"),r.localeName=e,r.pressedKeys=[],r._appliedMacros=[],r._keyMap={},r._macros=[]}var guard=require("type-guard"),KeyCombo=require("./key-combo");Locale.prototype.bindKeyCode=function(e,r){var s=this;guard("keyCode",e,"number"),guard("keyNames",r,["array","string"]),"string"==typeof r&&(r=[r]),s._keyMap[e]=r},Locale.prototype.bindMacro=function(e,r){var s=this;guard("keyComboStr",e,"string"),guard("keyNames",r,["function","string","array"]),"string"==typeof r&&(r=[r]);var a={keyCombo:new KeyCombo(e),keyNames:null,handler:null};"function"==typeof r?a.handler=r:a.keyNames=r,s._macros.push(a)},Locale.prototype.getKeyCodes=function(e){var r=this;guard("keyName",e,"string");var s=[];for(var a in r._keyMap){var o=r._keyMap[a].indexOf(e);o>-1&&s.push(0|a)}return s},Locale.prototype.getKeyNames=function(e){var r=this;return guard("keyCode",e,"number"),r._keyMap[e]||[]},Locale.prototype.pressKey=function(e){var r=this;if(guard("keyCode",e,["number","string"]),"string"==typeof e)for(var s=r.getKeyCodes(e),a=0;a<s.length;a+=1)r.pressKey(s[a]);else{for(var o=r.getKeyNames(e),a=0;a<o.length;a+=1)-1===r.pressedKeys.indexOf(o[a])&&r.pressedKeys.push(o[a]);r._applyMacros()}},Locale.prototype.releaseKey=function(e){var r=this;if(guard("keyCode",e,["number","string"]),"string"==typeof e)for(var s=r.getKeyCodes(e),a=0;a<s.length;a+=1)r.releaseKey(s[a]);else{for(var o=r.getKeyNames(e),a=0;a<o.length;a+=1){var t=r.pressedKeys.indexOf(o[a]);t>-1&&r.pressedKeys.splice(t,1)}r._clearMacros()}},Locale.prototype._applyMacros=function(){for(var e=this,r=e._macros.slice(0),s=0;s<r.length;s+=1){var a=r[s],o=a.keyCombo,t=a.keyNames;if(o.check(e.pressedKeys)){for(var p=0;p<t.length;p+=1)-1===e.pressedKeys.indexOf(t[p])&&e.pressedKeys.push(t[p]);e._appliedMacros.push(a)}}},Locale.prototype._clearMacros=function(){for(var e=this,r=0;r<e._appliedMacros.length;r+=1){var s=e._appliedMacros[r],a=s.keyCombo,o=s.keyNames;if(!a.check(e.pressedKeys)){for(var t=0;t<o.length;t+=1){var p=e.pressedKeys.indexOf(o[t]);p>-1&&e.pressedKeys.splice(p,1)}e._appliedMacros.splice(r,1),r-=1}}},module.exports=Locale;
},{"./key-combo":2,"type-guard":6}],5:[function(require,module,exports){
var Locale=require("../lib/locale"),locale=new Locale("us");locale.bindKeyCode(3,["cancel"]),locale.bindKeyCode(8,["backspace"]),locale.bindKeyCode(9,["tab"]),locale.bindKeyCode(12,["clear"]),locale.bindKeyCode(13,["enter"]),locale.bindKeyCode(16,["shift"]),locale.bindKeyCode(17,["ctrl"]),locale.bindKeyCode(18,["alt","menu"]),locale.bindKeyCode(19,["pause","break"]),locale.bindKeyCode(20,["capslock"]),locale.bindKeyCode(27,["escape","esc"]),locale.bindKeyCode(32,["space","spacebar"]),locale.bindKeyCode(33,["pageup"]),locale.bindKeyCode(34,["pagedown"]),locale.bindKeyCode(35,["end"]),locale.bindKeyCode(36,["home"]),locale.bindKeyCode(37,["left"]),locale.bindKeyCode(38,["up"]),locale.bindKeyCode(39,["right"]),locale.bindKeyCode(40,["down"]),locale.bindKeyCode(41,["select"]),locale.bindKeyCode(42,["printscreen"]),locale.bindKeyCode(43,["execute"]),locale.bindKeyCode(44,["snapshot"]),locale.bindKeyCode(45,["insert","ins"]),locale.bindKeyCode(46,["delete","del"]),locale.bindKeyCode(47,["help"]),locale.bindKeyCode(91,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),locale.bindKeyCode(92,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),locale.bindKeyCode(145,["scrolllock","scroll"]),locale.bindKeyCode(186,["semicolon",";"]),locale.bindKeyCode(187,["equal","equalsign","="]),locale.bindKeyCode(188,["comma",","]),locale.bindKeyCode(189,["dash","-"]),locale.bindKeyCode(190,["period","."]),locale.bindKeyCode(191,["slash","forwardslash","/"]),locale.bindKeyCode(192,["graveaccent","`"]),locale.bindKeyCode(219,["openbracket","["]),locale.bindKeyCode(220,["backslash","\\"]),locale.bindKeyCode(221,["closebracket","]"]),locale.bindKeyCode(222,["apostrophe","'"]),locale.bindKeyCode(48,["zero","0"]),locale.bindKeyCode(49,["one","1"]),locale.bindKeyCode(50,["two","2"]),locale.bindKeyCode(51,["three","3"]),locale.bindKeyCode(52,["four","4"]),locale.bindKeyCode(53,["five","5"]),locale.bindKeyCode(54,["six","6"]),locale.bindKeyCode(55,["seven","7"]),locale.bindKeyCode(56,["eight","8"]),locale.bindKeyCode(57,["nine","9"]),locale.bindKeyCode(96,["numzero","num0"]),locale.bindKeyCode(97,["numone","num1"]),locale.bindKeyCode(98,["numtwo","num2"]),locale.bindKeyCode(99,["numthree","num3"]),locale.bindKeyCode(100,["numfour","num4"]),locale.bindKeyCode(101,["numfive","num5"]),locale.bindKeyCode(102,["numsix","num6"]),locale.bindKeyCode(103,["numseven","num7"]),locale.bindKeyCode(104,["numeight","num8"]),locale.bindKeyCode(105,["numnine","num9"]),locale.bindKeyCode(106,["nummultiply","num*"]),locale.bindKeyCode(107,["numadd","num+"]),locale.bindKeyCode(108,["numenter"]),locale.bindKeyCode(109,["numsubtract","num-"]),locale.bindKeyCode(110,["numdecimal","num."]),locale.bindKeyCode(111,["numdivide","num/"]),locale.bindKeyCode(144,["numlock","num"]),locale.bindKeyCode(112,["f1"]),locale.bindKeyCode(113,["f2"]),locale.bindKeyCode(114,["f3"]),locale.bindKeyCode(115,["f4"]),locale.bindKeyCode(116,["f5"]),locale.bindKeyCode(117,["f6"]),locale.bindKeyCode(118,["f7"]),locale.bindKeyCode(119,["f8"]),locale.bindKeyCode(120,["f9"]),locale.bindKeyCode(121,["f10"]),locale.bindKeyCode(122,["f11"]),locale.bindKeyCode(123,["f12"]),locale.bindMacro("shift + `",["tilde","~"]),locale.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),locale.bindMacro("shift + 2",["at","@"]),locale.bindMacro("shift + 3",["number","#"]),locale.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),locale.bindMacro("shift + 5",["percent","%"]),locale.bindMacro("shift + 6",["caret","^"]),locale.bindMacro("shift + 7",["ampersand","and","&"]),locale.bindMacro("shift + 8",["asterisk","*"]),locale.bindMacro("shift + 9",["openparen","("]),locale.bindMacro("shift + 0",["closeparen",")"]),locale.bindMacro("shift + -",["underscore","_"]),locale.bindMacro("shift + =",["plus","+"]),locale.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),locale.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),locale.bindMacro("shift + \\",["verticalbar","|"]),locale.bindMacro("shift + ;",["colon",":"]),locale.bindMacro("shift + '",["quotationmark","'"]),locale.bindMacro("shift + !,",["openanglebracket","<"]),locale.bindMacro("shift + .",["closeanglebracket",">"]),locale.bindMacro("shift + /",["questionmark","?"]);for(var keyCode=65;90>=keyCode;keyCode+=1){var keyName=String.fromCharCode(keyCode+32),capitalKeyName=String.fromCharCode(keyCode);locale.bindKeyCode(keyCode,keyName),locale.bindMacro("shift + "+keyName,capitalKeyName),locale.bindMacro("capslock + "+keyName,capitalKeyName)}module.exports=locale;
},{"../lib/locale":4}],6:[function(require,module,exports){
var GuardError=require("./lib/guard-error"),guard=require("./lib/guard");exports=module.exports=function(){return guard.check.apply(guard,arguments)},exports.GuardError=GuardError,exports.guard=guard,exports.types=guard.types;
},{"./lib/guard":8,"./lib/guard-error":7}],7:[function(require,module,exports){
function GuardError(r,t,s){Error.call(this,r,t,s),this.message=r,this.name=this.constructor.name,t&&(this.fileName=t),s&&(this.lineNumber=s),Error.captureStackTrace(this,this.constructor),this._setStackOffset(1)}var inherits=require("inherits");inherits(GuardError,Error),GuardError.prototype._setStackOffset=function(r){try{throw new Error}catch(t){var s=this.stack.split("\n")[0],i=t.stack.split("\n"),e=i[r+2],a=e.match(/\(([^\)]+)\)/)[1].split(":");this.stack=[s].concat(i.slice(r+2)).join("\n"),this.fileName=a[0],this.lineNumber=a[1],this.columnNumber=a[2]}},module.exports=GuardError;
},{"inherits":9}],8:[function(require,module,exports){
var GuardError=require("./guard-error");exports.types=["object","string","boolean","number","array","regexp","date","stream","read-stream","write-stream","emitter","function","null","undefined"],exports.check=function(e,r,t){var n=this;if("string"!=typeof e)throw new TypeError("key must be a string");if("string"!=typeof t&&(null===t||"object"!=typeof t||"number"!=typeof t.length))throw new TypeError("type must be a string or array");var o=n._validateType(t);if(o)throw o._setStackOffset(n._stackOffset),o;var a=n._validateVal(e,t,r);if(a)throw a._setStackOffset(n._stackOffset),a;return null},exports._validateType=function(e){var r=this;if(null!==e&&"object"==typeof e&&"number"==typeof e.length){for(var t=0;t<e.length;t+=1){var n=r._validateType(e[t]);if(n)return n}return null}return-1===r.types.indexOf(e)?new GuardError("type must be one of the following values: "+r.types.join(", ")):void 0},exports._validateVal=function(e,r,t){var n=this;if(null!==r&&"object"==typeof r&&"number"==typeof r.length){for(var o=!1,a=0;a<r.length;a+=1)if(!n._validateVal(e,r[a],t)){o=!0;break}return o?null:new GuardError(e+" must be one of the following types: "+r.join(", "))}return"object"!==r||null!==t&&"object"==typeof t?"string"===r&&"string"!=typeof t?new GuardError(e+" must be a string"):"boolean"===r&&"boolean"!=typeof t?new GuardError(e+" must be a boolean"):"number"===r&&"number"!=typeof t?new GuardError(e+" must be a number"):"array"!==r||null!==t&&"object"==typeof t&&"number"==typeof t.length?"regexp"===r&&t.constructor!==RegExp?new GuardError(e+" must be a regexp"):"date"===r&&t.constructor!==Date?new GuardError(e+" must be a date"):"emitter"!==r||"function"==typeof t.addListener&&"function"==typeof t.emit?"stream"!==r||"function"==typeof t.on&&"function"==typeof t.pipe?"read-stream"!==r||"function"==typeof t.on&&"function"==typeof t.pipe&&"function"==typeof t.read?"write-stream"!==r||"function"==typeof t.on&&"function"==typeof t.pipe&&"function"==typeof t.write&&"function"==typeof t.end?"function"===r&&"function"!=typeof t?new GuardError(e+" must be a function"):"null"===r&&null!==t?new GuardError(e+" must be a null"):"undefined"===r&&void 0!==t?new GuardError(e+" must be a undefined"):null:new GuardError(e+" must be a write-stream"):new GuardError(e+" must be a read-stream"):new GuardError(e+" must be a stream"):new GuardError(e+" must be an emitter"):new GuardError(e+" must be an array"):new GuardError(e+" must be an object")},exports._stackOffset=2;
},{"./guard-error":7}],9:[function(require,module,exports){
module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}]},{},[1])(1)
});